"use strict";(self.webpackChunkacademydev=self.webpackChunkacademydev||[]).push([[276,528],{3528:(e,s,o)=>{o.r(s),o.d(s,{default:()=>a});var t=o(9500),n=o(6584),i=o(2496);const a=function(e){let{message:s,position:o="absolute",fill:a=!1,onTop:c=!1}=e;return(0,i.jsx)("div",{className:"error-card ".concat(a&&"fill"," ").concat(c&&"on-top"),children:(0,i.jsxs)("div",{className:"error-card__wrapper",children:[(0,i.jsx)("div",{className:"icon",children:(0,i.jsx)(t.u,{icon:n.gxQ})}),s]})})}},1276:(e,s,o)=>{o.r(s),o.d(s,{default:()=>h});var t=o(9060),n=o(1560),i=o(9500),a=o(6584),c=o(5332),d=o(3528),l=o(9844),r=o(1324),u=o(1384),v=o(2496);const h=function(){var e;const{courseId:s,orderNb:o}=(0,n.W4)(),{course:h,videos:p,instructors:m,setVideos:f,setCourse:j}=(0,l.a)(),[x,N]=(0,t.useState)(null),[b,g]=(0,t.useState)(o==="".concat(p.length)),[_,y]=(0,t.useState)("1"===o),[k,w]=(0,t.useState)(null!==(e=null===x||void 0===x?void 0:x.isDone)&&void 0!==e&&e),[E,I]=(0,t.useState)(!1),[S,C]=(0,t.useState)(""),D=(0,n.i6)(),{user:T}=(0,r.S)(),O=(0,u.A)();return(0,t.useEffect)((()=>{(async()=>{try{C(""),N(null);const e=await fetch("http://localhost:5050"+"/api/videos/details/".concat(s,"/").concat(o,"/").concat(null===T||void 0===T?void 0:T.uid),{method:"GET",headers:{"content-type":"application/json","x-access-token":O}}),t=await e.json();if(200!==e.status)throw Error(t.message);N(t[0])}catch(S){S instanceof Error?C(S.message):C("Error fetching data from server")}})()}),[s,o,T]),(0,t.useEffect)((()=>{y("1"===o),o==="".concat(p.length)?g(!0):g(!1)}),[o,p.length]),(0,t.useEffect)((()=>{var e;w(null!==(e=null===x||void 0===x?void 0:x.isDone)&&void 0!==e&&e)}),[x]),S?(0,v.jsx)("div",{className:"video",children:(0,v.jsx)(d.default,{message:S})}):(0,v.jsx)("div",{className:"video ".concat(null!==x&&void 0!==x&&x.isDone?"done":null),children:x?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"video__heading",children:[(0,v.jsx)("h2",{children:x.title}),!!k&&(0,v.jsx)(i.u,{className:"video__heading__check",icon:a.MN5})]}),(0,v.jsx)("video",{controls:!0}),(0,v.jsxs)("div",{className:"video__instructor",children:["Instructor(s):"," ",m.map(((e,s)=>{let{instructorFullName:o}=e;return o+(s===m.length-1?"":", ")}))]}),(0,v.jsx)("div",{className:"video__description",children:x.description}),(0,v.jsxs)("div",{className:"video__nav",children:[T&&(0,v.jsx)("button",{className:"done-btn ".concat(k?"done":null),onClick:async()=>{if(!h)return;let e;if(I(!0),k){var t,n;const i=await fetch("http://localhost:5050/api/videos/finished",{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":O},body:JSON.stringify({courseId:s,orderNb:o,userId:null!==(t=null===T||void 0===T?void 0:T.uid)&&void 0!==t?t:null})}),a=await i.json();if(200!==i.status)return C(a.message),void I(!1);e={...h,completed:(null!==(n=null===h||void 0===h?void 0:h.completed)&&void 0!==n?n:1)-1},w(!1)}else{var i,a;const t=await fetch("http://localhost:5050/api/videos/finished",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":O},body:JSON.stringify({courseId:s,orderNb:o,userId:null!==(i=null===T||void 0===T?void 0:T.uid)&&void 0!==i?i:null})}),n=await t.json();if(200!==t.status)return C(n.message),void I(!1);e={...h,completed:(null!==(a=null===h||void 0===h?void 0:h.completed)&&void 0!==a?a:-1)+1},w(!0)}const c=p.map((e=>e.courseId===s&&e.orderNb===parseInt(null!==o&&void 0!==o?o:"0")?{...e,isDone:!e.isDone}:e));j(e),f(c),I(!1)},disabled:E,children:"Done"}),(0,v.jsx)("button",{className:"prev-btn",onClick:()=>{y(!0);const e=parseInt(null!==o&&void 0!==o?o:"0")-1;D("/course/".concat(s,"/").concat(e))},disabled:_,children:"Prev"}),(0,v.jsx)("button",{className:"next-btn",onClick:()=>{g(!0);const e=parseInt(null!==o&&void 0!==o?o:"0")+1;D("/course/".concat(s,"/").concat(e))},disabled:b,children:"Next"})]})]}):(0,v.jsx)(c.default,{})})}}}]);
//# sourceMappingURL=276.d34a70d8.chunk.js.map