"use strict";(self.webpackChunkacademydev=self.webpackChunkacademydev||[]).push([[276,528],{3528:(e,s,o)=>{o.r(s),o.d(s,{default:()=>d});var t=o(9500),i=o(6584),n=o(2496);const d=function(e){let{message:s,position:o="absolute",fill:d=!1,onTop:a=!1}=e;return(0,n.jsx)("div",{className:"error-card ".concat(d&&"fill"," ").concat(a&&"on-top"),children:(0,n.jsxs)("div",{className:"error-card__wrapper",children:[(0,n.jsx)("div",{className:"icon",children:(0,n.jsx)(t.u,{icon:i.gxQ})}),s]})})}},1276:(e,s,o)=>{o.r(s),o.d(s,{default:()=>h});var t=o(9060),i=o(1560),n=o(9500),d=o(6584),a=o(5332),c=o(3528),l=o(9844),r=o(1324),u=o(1384),v=o(2496);const h=function(){var e;const{courseId:s,videoId:o}=(0,i.W4)(),{course:h,videos:m,instructors:f,activeVideoIdx:p,setActiveVideoIdx:x,setVideos:j,setCourse:N}=(0,l.a)(),[g,b]=(0,t.useState)(null),[_,k]=(0,t.useState)(p===m.length-1),[y,I]=(0,t.useState)(0===p),[w,E]=(0,t.useState)(null!==(e=null===g||void 0===g?void 0:g.isDone)&&void 0!==e&&e),[S,C]=(0,t.useState)(!1),[D,T]=(0,t.useState)(""),O=(0,i.i6)(),{user:V}=(0,r.S)(),A=(0,u.A)();return(0,t.useEffect)((()=>{(async()=>{try{T(""),b(null);const e=await fetch("http://localhost:5050"+"/api/videos/details/".concat(s,"/").concat(o,"/").concat(null===V||void 0===V?void 0:V.uid),{method:"GET",headers:{"content-type":"application/json","x-access-token":A}}),t=await e.json();if(200!==e.status)throw Error(t.message);b(t[0])}catch(D){D instanceof Error?T(D.message):T("Error fetching data from server")}})()}),[s,o,V]),(0,t.useEffect)((()=>{I(0===p),p===m.length-1?k(!0):k(!1)}),[p,m.length]),(0,t.useEffect)((()=>{var e;E(null!==(e=null===g||void 0===g?void 0:g.isDone)&&void 0!==e&&e)}),[g]),D?(0,v.jsx)("div",{className:"video",children:(0,v.jsx)(c.default,{message:D})}):(0,v.jsx)("div",{className:"video ".concat(null!==g&&void 0!==g&&g.isDone?"done":null),children:g?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"video__heading",children:[(0,v.jsx)("h2",{children:g.title}),!!w&&(0,v.jsx)(n.u,{className:"video__heading__check",icon:d.MN5})]}),(0,v.jsx)("video",{controls:!0}),(0,v.jsxs)("div",{className:"video__instructor",children:["Instructor(s):"," ",f.map(((e,s)=>{let{fullName:o}=e;return(null===o?"unknown":o)+(s===f.length-1?"":", ")}))]}),(0,v.jsx)("div",{className:"video__description",children:g.description}),(0,v.jsxs)("div",{className:"video__nav",children:[V&&(0,v.jsx)("button",{className:"done-btn ".concat(w?"done":null),onClick:async()=>{if(!h)return;let e;if(C(!0),w){var t,i;const n=await fetch("http://localhost:5050/api/videos/finished",{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":A},body:JSON.stringify({courseId:s,videoId:o,userId:null!==(t=null===V||void 0===V?void 0:V.uid)&&void 0!==t?t:null})}),d=await n.json();if(200!==n.status)return T(d.message),void C(!1);e={...h,completed:(null!==(i=null===h||void 0===h?void 0:h.completed)&&void 0!==i?i:1)-1},E(!1)}else{var n,d;const t=await fetch("http://localhost:5050/api/videos/finished",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":A},body:JSON.stringify({courseId:s,videoId:o,userId:null!==(n=null===V||void 0===V?void 0:V.uid)&&void 0!==n?n:null})}),i=await t.json();if(200!==t.status)return T(i.message),void C(!1);e={...h,completed:(null!==(d=null===h||void 0===h?void 0:h.completed)&&void 0!==d?d:-1)+1},E(!0)}const a=m.map((e=>e.courseId===s&&e.id===o?{...e,isDone:!e.isDone}:e));N(e),j(a),C(!1)},disabled:S,children:"Done"}),(0,v.jsx)("button",{className:"prev-btn",onClick:()=>{x(p-1),O("/course/".concat(s,"/").concat(m[p-1].id))},disabled:y,children:"Prev"}),(0,v.jsx)("button",{className:"next-btn",onClick:()=>{k(!0),x(p+1),O("/course/".concat(s,"/").concat(m[p+1].id))},disabled:_,children:"Next"})]})]}):(0,v.jsx)(a.default,{})})}}}]);
//# sourceMappingURL=276.1e9e2f1d.chunk.js.map