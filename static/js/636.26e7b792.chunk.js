"use strict";(self.webpackChunkacademydev=self.webpackChunkacademydev||[]).push([[636,528,600],{4600:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var i=t(9060),a=t(3596),r=t(2496);const o=function(e){let{setIsConfirm:s,setIsDelete:t}=e;const o=(0,i.useRef)(null),{theme:n}=(0,a.q)();return(0,i.useEffect)((()=>{function e(e){o.current&&!o.current.contains(e.target)&&s(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[o,s]),(0,r.jsx)("div",{className:"confirm-card ".concat(n),children:(0,r.jsxs)("div",{ref:o,className:"confirm-card__wrapper",children:[(0,r.jsx)("h4",{children:"Are you sure?"}),(0,r.jsxs)("div",{className:"confirm-card__wrapper__control",children:[(0,r.jsx)("span",{className:"is-easy hover",onClick:()=>{t(!0),s(!1)},children:"Confirm"}),(0,r.jsx)("span",{className:"is-hard hover",onClick:()=>s(!1),children:"Cancel"})]})]})})}},2308:(e,s,t)=>{t.d(s,{c:()=>n});var i=t(6584),a=t(9500),r=t(9060),o=t(2496);const n=function(e){let{displayText:s,setFile:t,accept:n}=e;const d=(0,r.useRef)(null);return(0,o.jsxs)("div",{className:"input-wrapper contain-file",children:[(0,o.jsxs)("label",{htmlFor:"file-input",children:[(0,o.jsx)(a.u,{icon:i.iMq}),(0,o.jsx)("span",{children:s})]}),(0,o.jsx)("input",{className:"file-input",id:"file-input",type:"file",name:"file",accept:n,onChange:e=>{d.current.innerText=e.target.files[0].name,t(e.target.files[0])}}),(0,o.jsx)("div",{ref:d,className:"message"})]})}},6992:(e,s,t)=>{t.d(s,{c:()=>a});var i=t(2496);const a=e=>{let{title:s,subtitle:t}=e;return(0,i.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,i.jsx)("h2",{style:{color:"var(--primary-text-color)",fontSize:"32px",fontWeight:"bold",marginBottom:"5px"},children:s}),(0,i.jsx)("h5",{style:{color:"var(--light-green-text-color)",fontWeight:"400",fontSize:"16px"},children:t})]})}},3528:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var i=t(9500),a=t(6584),r=t(2496);const o=function(e){let{message:s,position:t="absolute",fill:o=!1,onTop:n=!1}=e;return(0,r.jsx)("div",{className:"error-card ".concat(o&&"fill"," ").concat(n&&"on-top"),children:(0,r.jsxs)("div",{className:"error-card__wrapper",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)(i.u,{icon:a.gxQ})}),s]})})}},5636:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var i=t(1560),a=t(12),r=t(6992),o=t(9500),n=t(6584),d=t(1324),c=t(9060),l=t(1384),h=t(5332),p=t(3528),u=t(3248),m=t(3596),v=t(2622),x=t(4568),f=t(2308),j=t(2496);const g=x.kt().shape({title:x.Qb().max(65,"Title length must not exceed 65 characters").required("Course Title cannot be empty"),description:x.Qb().required("Required"),orderNb:x.CQ().typeError("Order number must be a number").required("Required")}),N=function(e){let{video:s,setIsEditing:t,setRefresh:a,isAdding:r=!1}=e;const[d,p]=(0,c.useState)(null),[u,x]=(0,c.useState)(!1),{theme:N}=(0,m.q)(),{courseId:b}=(0,i.W4)(),_=(0,l.A)();return(0,j.jsx)("div",{className:"edit-video ".concat(N),children:(0,j.jsxs)("div",{className:"edit-video__wrapper",children:[u&&(0,j.jsx)(h.default,{fill:!0,onTop:!0,minHeight:!1,particlesBackgroundColor:"#3e4396",borderRadius:"10px",message:"Uploading Video Please Don't Close or Refresh This Page"}),(0,j.jsx)("span",{"data-tooltip":"Cancel",className:"tooltip bottom cancel",onClick:()=>t(!1),children:(0,j.jsx)(o.u,{style:{display:"block"},icon:n.gxQ})}),(0,j.jsx)(v.QJ,{initialValues:s,onSubmit:e=>{r?(async e=>{try{x(!0);const s=new FormData;s.append("courseId",b),s.append("video",d),s.append("title",e.title),s.append("description",e.description);(await fetch("http://localhost:5050/api/videos/add",{method:"POST",headers:{"x-access-token":_},body:s})).ok&&(x(!1),a((e=>!e)),t(!1))}catch(s){x(!1),console.log(s)}x(!1)})(e):(async e=>{try{(await fetch("http://localhost:5050"+"/api/videos/".concat(s.id),{method:"PATCH",headers:{"content-type":"application/json","x-access-token":_},body:JSON.stringify({...e,prevOrderNb:s.orderNb})})).ok&&(a((e=>!e)),t(!1))}catch(i){console.log(i)}})(e)},validationSchema:g,children:e=>{let{isSubmitting:t,values:i,errors:a,isValid:o,handleBlur:n,handleChange:c,handleSubmit:l}=e;return(0,j.jsxs)(v.QF,{className:"dashboard-form",onSubmit:l,children:[(0,j.jsxs)("div",{"data-error":a.title?a.title:"",className:"input-wrapper ".concat(a.title?"error":""),children:[(0,j.jsx)("label",{htmlFor:"title",children:"Video Title:"}),(0,j.jsx)(v.IN,{onChange:c,onBlur:n,className:a.title?"error":"",name:"title",type:"text",placeholder:"Video Title"})]}),(0,j.jsxs)("div",{className:"input-wrapper ".concat(a.description?"error":""),"data-error":a.description?a.description:"",children:[(0,j.jsx)("label",{htmlFor:"description",children:"Video Description:"}),(0,j.jsx)(v.IN,{onChange:c,onBlur:n,className:a.description?"error":"",name:"description",type:"text",placeholder:"Video Description"})]}),!r&&(0,j.jsxs)("div",{className:"two-inputs",children:[(0,j.jsxs)("div",{className:"input-wrapper",children:[(0,j.jsx)("label",{htmlFor:"durationInMinutes",children:"Duration In Minutes:"}),(0,j.jsx)(v.IN,{onChange:c,onBlur:n,name:"durationInMinutes",type:"text",disabled:!0})]}),(0,j.jsxs)("div",{className:"input-wrapper ".concat(a.orderNb?"error":""),"data-error":a.orderNb?a.orderNb:"",children:[(0,j.jsx)("label",{htmlFor:"orderNb",children:"Change Video Order:"}),(0,j.jsx)(v.IN,{onChange:c,onBlur:n,name:"orderNb",className:a.orderNb?"error":"",type:"text"})]})]}),r&&(0,j.jsx)(f.c,{displayText:"upload video",setFile:p,accept:".mp4, .webm, .ogg, .ogv, .avi, .flv, .mov, .wmv, .mkv, .3gp, .3g2, .m4v, .mpg, .mpeg, .m2v, .m4v, .svi, .divx, .vob, .f4v, .asf, .qt, .m2ts, .mts, .ts, .mxf, .roq, .nsv, .flv, .f4v, .f4p, .f4a, .f4b, .f4r, .f4x, .3gp2, .3gpp, .3gp"}),(0,j.jsx)("div",{className:"dashboard-form__save",children:(0,j.jsx)("button",{type:"submit",disabled:!o||t||JSON.stringify({...i,orderNb:parseInt(i.orderNb.toString())})===JSON.stringify(s)&&(!r||!d)||!!r&&!d,children:r?"Add":"Update"})})]})}})]})})};var b=t(4600);const _=function(e){let{video:s,videos:t,setRefresh:i}=e;const{title:a,description:r,durationInMinutes:d}=s,[h,p]=(0,c.useState)(!1),[m,v]=(0,c.useState)(!1),[x,f]=(0,c.useState)(!1),g=(0,l.A)();return(0,c.useEffect)((()=>{m&&(async()=>{try{(await fetch("http://localhost:5050"+"/api/videos/".concat(s.id),{method:"DELETE",headers:{"content-type":"application/json","x-access-token":g}})).ok&&(i((e=>!e)),v(!1))}catch(e){console.log(e)}})()}),[m,g,s.id,i]),(0,j.jsxs)("div",{className:"video-display",children:[x&&(0,j.jsx)(N,{video:s,setIsEditing:f,setRefresh:i}),h&&(0,j.jsx)(b.default,{setIsConfirm:p,setIsDelete:v,setRefresh:i}),(0,j.jsx)("div",{className:"video-display__img",children:(0,j.jsx)(o.u,{icon:u.WU6})}),(0,j.jsxs)("div",{className:"video-display__content",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{children:a}),(0,j.jsx)("p",{children:r})]}),(0,j.jsx)("div",{className:"video-display__content__details",children:(0,j.jsxs)("div",{className:"video-display__content__details__duration",children:["Duration: ",d," minutes"]})})]}),(0,j.jsxs)("div",{className:"video-display__control",children:[(0,j.jsx)("span",{className:"edit",onClick:()=>f(!0),children:(0,j.jsx)(o.u,{icon:n.cpv})}),(0,j.jsx)("span",{className:"delete",onClick:()=>p(!0),children:(0,j.jsx)(o.u,{icon:n._8k})})]})]})};const y=function(){const[e,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(""),[v,x]=(0,c.useState)([]),[f,g]=(0,c.useState)(!1),[b,y]=(0,c.useState)(!1),[k,C]=(0,c.useState)(""),{courseId:w}=(0,i.W4)(),{user:S}=(0,d.S)(),I=(0,l.A)(),{theme:E}=(0,m.q)(),T=(0,i.IT)();return(0,c.useEffect)((()=>{let e=T.pathname.split("/");for(;""===e[e.length-1];)e.pop();e.pop(),C(e.join("/"))}),[T.pathname]),(0,c.useEffect)((()=>{w?(async()=>{try{const e=await fetch("http://localhost:5050/api/videos/".concat(w),{method:"GET",headers:{"content-type":"application/json","x-access-token":I}}),t=await e.json();if(200!==e.status)throw Error(t.message);x(t),s(!1),0===t.length&&u("No videos available")}catch(e){s(!1),e instanceof Error?u(e.message):u("Error fetching data from server")}})():x([])}),[w,S,b,I]),(0,j.jsxs)("div",{className:"dashboard-course",children:[(0,j.jsxs)("div",{className:"dashboard-course__header",children:[(0,j.jsx)(a.cH,{to:k,children:(0,j.jsx)("div",{"data-tooltip":"Back",className:"dashboard-course__header__nav tooltip bottom",children:(0,j.jsx)(o.u,{icon:n.kZA})})}),(0,j.jsxs)("div",{className:"dashboard-course__header__details",children:[(0,j.jsx)(r.c,{title:"Videos",subtitle:"In this page you can view and add videos to the selected course"}),"instructor"===(null===S||void 0===S?void 0:S.role.toLowerCase())&&(0,j.jsxs)("div",{className:"dashboard-course__add",onClick:()=>g(!0),children:[(0,j.jsx)(o.u,{icon:n.qsE}),"Add Video"]})]})]}),(0,j.jsxs)("div",{className:"dashboard-course__videos",children:[f&&(0,j.jsx)(N,{video:{id:"",orderNb:0,courseId:null!==w&&void 0!==w?w:"",durationInMinutes:0,title:"",description:"",videoUrl:""},isAdding:f,setIsEditing:g,setRefresh:y}),e||t?(0,j.jsx)("div",{className:"dashboard-course__videos__status",children:e?(0,j.jsx)(h.default,{backgroundColor:"dark"===E?"#141b2d":"",particlesBackgroundColor:"dark"===E?"#1f2a40":"#f2f0f0"}):(0,j.jsx)(p.default,{message:t})}):v.map(((e,s)=>(0,j.jsx)(_,{video:e,videos:v,setRefresh:y},s)))]})]})}}}]);
//# sourceMappingURL=636.26e7b792.chunk.js.map