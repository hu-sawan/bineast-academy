"use strict";(self.webpackChunkacademydev=self.webpackChunkacademydev||[]).push([[784,528],{2308:(e,s,i)=>{i.d(s,{c:()=>l});var t=i(6584),a=i(9500),r=i(9060),n=i(2496);const l=function(e){let{displayText:s,setFile:i,accept:l}=e;const c=(0,r.useRef)(null);return(0,n.jsxs)("div",{className:"input-wrapper contain-file",children:[(0,n.jsxs)("label",{htmlFor:"file-input",children:[(0,n.jsx)(a.u,{icon:t.iMq}),(0,n.jsx)("span",{children:s})]}),(0,n.jsx)("input",{className:"file-input",id:"file-input",type:"file",name:"file",accept:l,onChange:e=>{c.current.innerText=e.target.files[0].name,i(e.target.files[0])}}),(0,n.jsx)("div",{ref:c,className:"message"})]})}},6992:(e,s,i)=>{i.d(s,{c:()=>a});var t=i(2496);const a=e=>{let{title:s,subtitle:i}=e;return(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("h2",{style:{color:"var(--primary-text-color)",fontSize:"32px",fontWeight:"bold",marginBottom:"5px"},children:s}),(0,t.jsx)("h5",{style:{color:"var(--light-green-text-color)",fontWeight:"400",fontSize:"16px"},children:i})]})}},3528:(e,s,i)=>{i.r(s),i.d(s,{default:()=>n});var t=i(9500),a=i(6584),r=i(2496);const n=function(e){let{message:s,position:i="absolute",fill:n=!1,onTop:l=!1}=e;return(0,r.jsx)("div",{className:"error-card ".concat(n&&"fill"," ").concat(l&&"on-top"),children:(0,r.jsxs)("div",{className:"error-card__wrapper",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)(t.u,{icon:a.gxQ})}),s]})})}},5784:(e,s,i)=>{i.r(s),i.d(s,{default:()=>y});var t=i(9060),a=i(6992),r=i(1384),n=i(5332),l=i(9500),c=i(6584),o=i(3596),d=i(2622),u=i(4568),p=i(2308),h=i(1324),m=i(2496);const x=u.kt().shape({title:u.Qb().max(65,"Title length must not exceed 65 characters").required("Course Title cannot be empty"),description:u.Qb().required("Required")}),v=function(e){let{course:s,setIsEditing:i,setRefresh:a,isAdding:n=!1}=e;const[u,v]=(0,t.useState)(null),{theme:j}=(0,o.q)(),g=(0,r.A)(),{user:f}=(0,h.S)(),b={...s,level:s.level.toLowerCase(),price:s.isPremium?"premium":"free"};return(0,m.jsx)("div",{className:"edit-course ".concat(j),children:(0,m.jsxs)("div",{className:"edit-course__wrapper",children:[(0,m.jsx)("span",{"data-tooltip":"Cancel",className:"tooltip bottom cancel",onClick:()=>i(!1),children:(0,m.jsx)(l.u,{style:{display:"block"},icon:c.gxQ})}),(0,m.jsx)(d.QJ,{initialValues:b,onSubmit:e=>{var t,r;const l=new FormData;return l.append("title",e.title),l.append("description",e.description),l.append("level",e.level),l.append("visibility",e.visibility),l.append("userId",null!==(t=null===f||void 0===f?void 0:f.id)&&void 0!==t?t:""),l.append("isPremium","premium"===e.price?"true":"false"),l.append("thumbnail",null!==u&&void 0!==u?u:""),l.append("tags",null!==(r=e.tags)&&void 0!==r?r:""),new Promise(n?(e,s)=>{fetch("http://localhost:5050/api/courses/add",{method:"POST",headers:{"x-access-token":g},body:l}).then((t=>{t.ok?(i(!1),e(),setTimeout((()=>{a((e=>!e))}),1e3)):s(new Error(t.statusText))})).catch((e=>{e instanceof Error&&(console.log(e.message),s(e.message)),s("Something wrong happened while editing course")}))}:(e,t)=>{fetch("http://localhost:5050/api/courses/"+s.id,{method:"PATCH",headers:{"x-access-token":g},body:l}).then((s=>{s.ok?(i(!1),e(),setTimeout((()=>{a((e=>!e))}),1e3)):t(new Error(s.statusText))})).catch((e=>{e instanceof Error&&t(e.message),t("Something wrong happened while editing course")}))})},validationSchema:x,children:e=>{let{isSubmitting:i,values:t,errors:a,isValid:r,handleBlur:l,handleChange:c,handleSubmit:o}=e;return(0,m.jsxs)(d.QF,{className:"dashboard-form",onSubmit:o,children:[(0,m.jsxs)("div",{"data-error":a.title?a.title:"",className:"input-wrapper ".concat(a.title?"error":""),children:[(0,m.jsx)("label",{htmlFor:"title",children:"Course Title:"}),(0,m.jsx)(d.IN,{onChange:c,onBlur:l,className:a.title?"error":"",name:"title",type:"text",placeholder:"Course Title"})]}),(0,m.jsxs)("div",{className:"input-wrapper ".concat(a.description?"error":""),"data-error":a.description?a.description:"",children:[(0,m.jsx)("label",{htmlFor:"description",children:"Course Description:"}),(0,m.jsx)(d.IN,{onChange:c,onBlur:l,className:a.description?"error":"",name:"description",type:"text",placeholder:"Course Description"})]}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsxs)("label",{htmlFor:"tags",children:["Tags:"," ",(0,m.jsx)("span",{className:"addition",children:"(separated by ' , ')"})]}),(0,m.jsx)(d.IN,{onChange:c,onBlur:l,name:"tags",type:"text"})]}),(0,m.jsxs)("div",{className:"three-inputs",children:[(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("label",{htmlFor:"level",children:"Level:"}),(0,m.jsxs)(d.IN,{name:"level",as:"select",children:[(0,m.jsx)("option",{value:"beginner",children:"Beginner"}),(0,m.jsx)("option",{value:"advanced",children:"Advanced"}),(0,m.jsx)("option",{value:"intermediate",children:"Intermediate"})]})]}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("label",{htmlFor:"price",children:"Price"}),(0,m.jsxs)(d.IN,{name:"price",as:"select",children:[(0,m.jsx)("option",{value:"free",children:"Free"}),(0,m.jsx)("option",{value:"premium",children:"Premium"})]})]}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("label",{htmlFor:"visibility",children:"Visibility:"}),(0,m.jsxs)(d.IN,{name:"visibility",as:"select",children:[(0,m.jsx)("option",{value:"public",children:"Public"}),(0,m.jsx)("option",{value:"private",children:"Private"})]})]}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("label",{htmlFor:"durationInMinutes",children:"Duration In Minutes:"}),(0,m.jsx)(d.IN,{onChange:c,onBlur:l,name:"durationInMinutes",type:"text",disabled:!0})]})]}),(0,m.jsx)(p.c,{displayText:"choose new thumbnail",setFile:v,accept:".png, .jpeg, .jpg"}),(0,m.jsx)("div",{className:"dashboard-form__save",children:(0,m.jsx)("button",{type:"submit",disabled:!r||i||JSON.stringify({...s,price:s.isPremium?"premium":"free"})===JSON.stringify({...t,price:t.price.toLowerCase()})&&!u,children:n?"Add":"Update"})})]})}})]})})};var j=i(1560),g=i(12);const f=(0,t.lazy)((()=>i.e(600).then(i.bind(i,4600))));const b=function(e){let{course:s,setRefresh:i}=e;const[a,n]=(0,t.useState)(!1),[o,d]=(0,t.useState)(!1),[u,p]=(0,t.useState)(!1),h=(0,j.IT)().pathname,{id:x,imgUrl:b,title:N,description:y,durationInMinutes:_,level:w,isPremium:C,visibility:k}=s,S=(0,r.A)();return(0,t.useEffect)((()=>{o&&(async()=>{try{(await fetch("http://localhost:5050"+"/api/courses/".concat(x),{method:"DELETE",headers:{"content-type":"application/json","x-access-token":S}})).ok&&(i((e=>!e)),d(!1))}catch(e){console.log(e)}})()}),[o,S,x,i]),(0,m.jsxs)("div",{className:"course-display",children:[a&&(0,m.jsx)(f,{setIsConfirm:n,setIsDelete:d,setRefresh:i}),u&&(0,m.jsx)(v,{course:s,setIsEditing:p,setRefresh:i}),(0,m.jsxs)(g.cH,{to:"".concat(h,"/").concat(s.id),className:"course-display__link",children:[(0,m.jsx)("div",{className:"course-display__img",children:(0,m.jsx)("img",{src:b,alt:N})}),(0,m.jsxs)("div",{className:"course-display__content",children:[(0,m.jsxs)("div",{className:"video-display__content__title",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{children:N}),(0,m.jsx)("p",{children:y})]}),(0,m.jsx)("div",{"data-tooltip":"".concat(k),className:"visibility tooltip bottom",children:"public"===(null===k||void 0===k?void 0:k.toLowerCase())?(0,m.jsx)(l.u,{icon:c.ILB}):(0,m.jsx)(l.u,{icon:c.yOB})})]}),(0,m.jsxs)("div",{className:"course-display__content__details",children:[(0,m.jsxs)("div",{className:"course-display__content__details__duration",children:["Duration: ",_," minutes"]}),(0,m.jsxs)("div",{className:"course-display__content__details__level",children:["Level: ",w]}),(0,m.jsx)("div",{className:"course-display__content__details__is-premium",children:C?"Premium":"Free"})]})]})]}),(0,m.jsxs)("div",{className:"course-display__control",children:[(0,m.jsx)("span",{className:"edit",onClick:()=>p(!0),children:(0,m.jsx)(l.u,{icon:c.cpv})}),(0,m.jsx)("span",{className:"delete",onClick:()=>n(!0),children:(0,m.jsx)(l.u,{icon:c._8k})})]})]})};var N=i(3528);const y=function(){const[e,s]=(0,t.useState)([]),[i,d]=(0,t.useState)(!1),[u,p]=(0,t.useState)(""),[x,j]=(0,t.useState)(!1),[g,f]=(0,t.useState)(!1),{user:y}=(0,h.S)(),_=(0,r.A)(),{theme:w}=(0,o.q)();return(0,t.useEffect)((()=>{(async()=>{const e="admin"===(null===y||void 0===y?void 0:y.role.toLowerCase())?"/api/courses/admin":"/api/courses/instructor/".concat(null===y||void 0===y?void 0:y.id);try{p(""),d(!0);const i=await fetch("http://localhost:5050"+e,{method:"GET",headers:{"content-type":"application/json","x-access-token":_}}),t=await i.json();if(200!==i.status)throw new Error(t.message);s(t),d(!1),0===t.length&&p("No courses available")}catch(i){d(!1),i instanceof Error?p(i.message):p("Error fetching data from server")}})()}),[x,_,null===y||void 0===y?void 0:y.role,null===y||void 0===y?void 0:y.id]),(0,m.jsxs)("div",{className:"dashboard-courses",children:[(0,m.jsxs)("div",{className:"dashboard-courses__header",children:[(0,m.jsx)(a.c,{title:"Courses",subtitle:"In this page you can manage courses"}),"instructor"===(null===y||void 0===y?void 0:y.role.toLowerCase())&&(0,m.jsxs)("div",{className:"dashboard-courses__add",onClick:()=>f(!0),children:[(0,m.jsx)(l.u,{icon:c.qsE}),"Add Course"]})]}),(0,m.jsxs)("div",{className:"courses",children:[g&&(0,m.jsx)(v,{setIsEditing:f,course:{title:"",description:"",id:"",durationInMinutes:0,isPremium:!1,imgUrl:"",level:"beginner",visibility:"public",tags:""},setRefresh:j,isAdding:!0}),i||u?(0,m.jsx)("div",{className:"dashboard-courses__status",children:i?(0,m.jsx)(n.default,{backgroundColor:"dark"===w?"#141b2d":"",particlesBackgroundColor:"dark"===w?"#1f2a40":"#f2f0f0"}):(0,m.jsx)(N.default,{message:u})}):e.map((e=>(0,m.jsx)(b,{setRefresh:j,course:e},e.id)))]})]})}}}]);
//# sourceMappingURL=784.409b2d5e.chunk.js.map