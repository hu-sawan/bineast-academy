"use strict";(self.webpackChunkacademydev=self.webpackChunkacademydev||[]).push([[12,528],{6992:(e,s,t)=>{t.d(s,{c:()=>a});var i=t(2496);const a=e=>{let{title:s,subtitle:t}=e;return(0,i.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,i.jsx)("h2",{style:{color:"var(--primary-text-color)",fontSize:"32px",fontWeight:"bold",marginBottom:"5px"},children:s}),(0,i.jsx)("h5",{style:{color:"var(--light-green-text-color)",fontWeight:"400",fontSize:"16px"},children:t})]})}},3528:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var i=t(9500),a=t(6584),r=t(2496);const n=function(e){let{message:s,position:t="absolute",fill:n=!1,onTop:l=!1}=e;return(0,r.jsx)("div",{className:"error-card ".concat(n&&"fill"," ").concat(l&&"on-top"),children:(0,r.jsxs)("div",{className:"error-card__wrapper",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)(i.u,{icon:a.gxQ})}),s]})})}},7392:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var i=t(9060),a=t(6992),r=t(1384),n=t(5332),l=t(9500),c=t(6584),o=t(3596),d=t(2622),u=t(4568),p=t(2496);const h=function(e){let{displayText:s,setFile:t}=e;const a=(0,i.useRef)(null);return(0,p.jsxs)("div",{className:"input-wrapper contain-file",children:[(0,p.jsxs)("label",{htmlFor:"file-input",children:[(0,p.jsx)(l.u,{icon:c.iMq}),(0,p.jsx)("span",{children:s})]}),(0,p.jsx)("input",{className:"file-input",id:"file-input",type:"file",accept:".png, .jpeg, .jpg",onChange:e=>{a.current.innerText=e.target.files[0].name,t(e.target.files[0])}}),(0,p.jsx)("div",{ref:a,className:"message"})]})};const m=u.kt().shape({title:u.Qb().max(65,"Title length must not exceed 65 characters").required("Course Title cannot be empty"),description:u.Qb().required("Required")}),x=function(e){let{course:s,setIsEditing:t,setRefresh:a}=e;const[n,u]=(0,i.useState)(null),{theme:x}=(0,o.q)(),j=(0,r.A)(),v={...s,level:s.level.toLowerCase(),price:s.isPremium?"premium":"free"};return(0,p.jsx)("div",{className:"edit-course ".concat(x),children:(0,p.jsxs)("div",{className:"edit-course__wrapper",children:[(0,p.jsx)("span",{"data-tooltip":"Cancel",className:"tooltip bottom cancel",onClick:()=>t(!1),children:(0,p.jsx)(l.u,{style:{display:"block"},icon:c.gxQ})}),(0,p.jsx)(d.QJ,{initialValues:v,onSubmit:e=>{var i;const r=new FormData;return r.append("title",e.title),r.append("description",e.description),r.append("level",e.level),r.append("price",e.price),r.append("tags",null!==(i=e.tags)&&void 0!==i?i:""),r.append("thumbnail",null!==n&&void 0!==n?n:""),new Promise(((e,i)=>{fetch("http://localhost:5050/api/courses/"+s.id,{method:"PATCH",headers:{"x-access-token":j},body:r}).then((s=>{s.ok?(t(!1),e(),setTimeout((()=>{a((e=>!e))}),1e3)):i(new Error(s.statusText))})).catch((e=>{e instanceof Error&&i(e.message),i("Something wrong happened while editing course")}))}))},validationSchema:m,children:e=>{let{isSubmitting:t,values:i,errors:a,isValid:r,handleBlur:n,handleChange:l,handleSubmit:c}=e;return(0,p.jsxs)(d.QF,{className:"dashboard-form",onSubmit:c,children:[(0,p.jsxs)("div",{"data-error":a.title?a.title:"",className:"input-wrapper ".concat(a.title?"error":""),children:[(0,p.jsx)("label",{htmlFor:"title",children:"Course Title:"}),(0,p.jsx)(d.IN,{onChange:l,onBlur:n,className:a.title?"error":"",name:"title",type:"text",placeholder:"Course Title"})]}),(0,p.jsxs)("div",{className:"input-wrapper ".concat(a.description?"error":""),"data-error":a.description?a.description:"",children:[(0,p.jsx)("label",{htmlFor:"description",children:"Course Description:"}),(0,p.jsx)(d.IN,{onChange:l,onBlur:n,className:a.description?"error":"",name:"description",type:"text",placeholder:"Course Description"})]}),(0,p.jsxs)("div",{className:"input-wrapper",children:[(0,p.jsxs)("label",{htmlFor:"tags",children:["Tags:"," ",(0,p.jsx)("span",{className:"addition",children:"(separated by ' , ')"})]}),(0,p.jsx)(d.IN,{onChange:l,onBlur:n,name:"tags",type:"text"})]}),(0,p.jsxs)("div",{className:"three-inputs",children:[(0,p.jsxs)("div",{className:"input-wrapper",children:[(0,p.jsx)("label",{htmlFor:"level",children:"Level:"}),(0,p.jsxs)(d.IN,{name:"level",as:"select",children:[(0,p.jsx)("option",{value:"beginner",children:"Beginner"}),(0,p.jsx)("option",{value:"advanced",children:"Advanced"}),(0,p.jsx)("option",{value:"intermediate",children:"Intermediate"})]})]}),(0,p.jsxs)("div",{className:"input-wrapper",children:[(0,p.jsx)("label",{htmlFor:"price",children:"Price"}),(0,p.jsxs)(d.IN,{name:"price",as:"select",children:[(0,p.jsx)("option",{value:"free",children:"Free"}),(0,p.jsx)("option",{value:"premium",children:"Premium"})]})]}),(0,p.jsxs)("div",{className:"input-wrapper",children:[(0,p.jsx)("label",{htmlFor:"visibility",children:"Visibility:"}),(0,p.jsxs)(d.IN,{name:"visibility",as:"select",children:[(0,p.jsx)("option",{value:"public",children:"Public"}),(0,p.jsx)("option",{value:"private",children:"Private"})]})]}),(0,p.jsxs)("div",{className:"input-wrapper",children:[(0,p.jsx)("label",{htmlFor:"durationInMinutes",children:"Duration In Minutes:"}),(0,p.jsx)(d.IN,{onChange:l,onBlur:n,name:"durationInMinutes",type:"text",disabled:!0})]})]}),(0,p.jsx)(h,{displayText:"choose new thumbnail",setFile:u}),(0,p.jsx)("div",{className:"dashboard-form__save",children:(0,p.jsx)("button",{type:"submit",disabled:!r||t||JSON.stringify({...s,price:s.isPremium?"premium":"free"})===JSON.stringify(i),children:"Update"})})]})}})]})})},j=(0,i.lazy)((()=>t.e(600).then(t.bind(t,4600))));const v=function(e){let{course:s,setRefresh:t}=e;const[a,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),{id:m,imgUrl:v,title:f,description:g,durationInMinutes:N,level:b,isPremium:_}=s,y=(0,r.A)();return(0,i.useEffect)((()=>{o&&(async()=>{try{(await fetch("http://localhost:5050"+"/api/courses/".concat(m),{method:"DELETE",headers:{"content-type":"application/json","x-access-token":y}})).ok&&(t((e=>!e)),d(!1))}catch(e){console.log(e)}})()}),[o,y,m,t]),(0,p.jsxs)("div",{className:"course-display",onClick:()=>{},children:[a&&(0,p.jsx)(j,{setIsConfirm:n,setIsDelete:d,setRefresh:t}),u&&(0,p.jsx)(x,{course:s,setIsEditing:h,setRefresh:t}),(0,p.jsx)("div",{className:"course-display__img",children:(0,p.jsx)("img",{src:v,alt:f})}),(0,p.jsxs)("div",{className:"course-display__content",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:f}),(0,p.jsx)("p",{children:g})]}),(0,p.jsxs)("div",{className:"course-display__content__details",children:[(0,p.jsxs)("div",{className:"course-display__content__details__duration",children:["Duration: ",N," minutes"]}),(0,p.jsxs)("div",{className:"course-display__content__details__level",children:["Level: ",b]}),(0,p.jsx)("div",{className:"course-display__content__details__is-premium",children:_?"Premium":"Free"})]})]}),(0,p.jsxs)("div",{className:"course-display__control",children:[(0,p.jsx)("span",{className:"edit",onClick:()=>h(!0),children:(0,p.jsx)(l.u,{icon:c.cpv})}),(0,p.jsx)("span",{className:"delete",onClick:()=>n(!0),children:(0,p.jsx)(l.u,{icon:c._8k})})]})]})};var f=t(3528),g=t(1324);const N=function(){const[e,s]=(0,i.useState)([]),[t,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)(""),[h,m]=(0,i.useState)(!1),{user:x}=(0,g.S)(),j=(0,r.A)();return(0,i.useEffect)((()=>{(async()=>{try{u(""),o(!0);const e=await fetch("http://localhost:5050/api/courses",{method:"GET",headers:{"content-type":"application/json","x-access-token":j}}),t=await e.json();if(200!==e.status)throw new Error(t.message);s(t),o(!1),0===t.length&&u("No courses available")}catch(e){o(!1),e instanceof Error?u(e.message):u("Error fetching data from server")}})()}),[h,j]),(0,p.jsxs)("div",{className:"dashboard-courses",children:[(0,p.jsxs)("div",{className:"dashboard-courses__header",children:[(0,p.jsx)(a.c,{title:"Courses",subtitle:"In this page you can manage courses"}),"instructor"===(null===x||void 0===x?void 0:x.role.toLowerCase())&&(0,p.jsxs)("div",{className:"dashboard-courses__add",children:[(0,p.jsx)(l.u,{icon:c.qsE}),"Add Course"]})]}),(0,p.jsx)("div",{className:"courses",children:t||d?(0,p.jsx)("div",{className:"dashboard-courses__status",children:t?(0,p.jsx)(n.default,{}):(0,p.jsx)(f.default,{message:d})}):e.map((e=>(0,p.jsx)(v,{setRefresh:m,course:e},e.id)))})]})}}}]);
//# sourceMappingURL=12.f9ca53a1.chunk.js.map